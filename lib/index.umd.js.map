{"version":3,"file":"index.umd.js","sources":["../src/utils/ie11.ts","../src/utils/render.ts","../src/utils/typeGuards.ts","../src/utils/sanitize.ts","../src/lib/constants.ts","../src/lib/components/email.ts","../src/lib/state/constants.ts","../src/lib/state/actionCreators.ts","../src/lib/actions/emailActions/add.ts","../src/utils/error.ts","../src/lib/actions/emailActions/remove.ts","../src/lib/actions/emailActions/index.ts","../src/utils/object.ts","../src/lib/components/emails.ts","../src/lib/components/input.ts","../src/lib/components/root.ts","../src/lib/actions/libraryActions.ts","../src/lib/options/index.ts","../src/utils/isValidEmail.ts","../src/lib/state/actions.ts","../src/lib/state/stateManager.ts","../src/index.ts"],"sourcesContent":["export const remove = (node?: Element | null): void => {\n  if (node === undefined || node === null) {\n    return;\n  }\n\n  if ('remove' in Element.prototype) {\n    node.remove();\n  } else if (node.parentNode !== null) {\n    // eslint-disable-next-line unicorn/prefer-node-remove\n    node.parentNode.removeChild(node);\n  }\n};\n\nexport const includes = (array: string[], item: string): boolean => {\n  // eslint-disable-next-line max-len\n  // eslint-disable-next-line @typescript-eslint/prefer-includes, unicorn/prefer-includes,\n  return array.indexOf(item) !== -1;\n};\n","/**\n * Render Component\n * @param template\n * @param element\n */\nexport const render = (template: string, element: Element): void => {\n  element.innerHTML += template.trim();\n};\n\n/**\n * Make DOM Node from template\n * @param template\n */\nexport const makeElementFromHTML = (template: string): ChildNode => {\n  const div = document.createElement('div');\n  render(template, div);\n\n  return div.firstChild as ChildNode;\n};\n","/**\n * Verify if clicked element is a button\n * @param node\n */\nexport const isClickedButton = (\n  node: EventTarget | null,\n): node is HTMLButtonElement => {\n  return Boolean((node as HTMLButtonElement).type === 'button');\n};\n\n/**\n * Verify if value is an array of emails\n * @param value\n */\nexport const isMultiple = (value: string | string[]): value is string[] => {\n  return Array.isArray(value);\n};\n","/**\n * Sanitizes rendered HTML\n * @param value\n */\nexport const sanitize = (value: string): string => {\n  return value\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/\"/g, '&quot;');\n};\n","export enum ChangeType {\n  Added = 'Added',\n  Removed = 'Removed',\n}\n\nexport const CLASSES = {\n  CONTAINER: 'EmailsInputWrapper',\n  EMAIL: 'EmailsInput-email',\n  INPUT: 'EmailsInput-input',\n  WRAPPER: 'EmailsInput',\n};\n","import { sanitize } from '../../utils/sanitize';\nimport { isClickedButton } from '../../utils/typeGuards';\nimport { EmailActions } from '../actions/types';\nimport { CLASSES } from '../constants';\nimport { Entry } from '../state/types';\nimport { EmailHandlers } from './types';\n\nexport const EMAIL_CLASSES = {\n  removeButton: 'Email-remove',\n  root: 'Email',\n  text: 'Email-text',\n};\n\nconst { removeButton, root, text } = EMAIL_CLASSES;\n\n/**\n * Email Component Template\n * @param value\n * @param id\n */\nexport const emailTemplate = (value: Entry, id: string): string => `\n<div class=\"${CLASSES.EMAIL} ${root} Email--${\n  value.isValid ? 'valid' : 'invalid'\n}\" data-id=\"${id}\">\n  <span class=\"${text}\">\n    ${sanitize(value.email)}\n  </span>\n  <button aria-label=\"remove email\" class=\"${removeButton}\" data-id=\"${id}\" type=\"button\">\n    &times;\n  </button>\n</div>`;\n\n/**\n * Email Component Event Handlers\n * @param handlers\n */\nexport const makeEmailHandlers = (handlers: EmailActions): EmailHandlers => {\n  const { removeByLocalId } = handlers;\n\n  const handleRemoveClick = (event: MouseEvent): void => {\n    const { target } = event;\n\n    if (!isClickedButton(target)) {\n      return;\n    }\n\n    const { id } = target.dataset;\n\n    if (typeof id !== 'undefined') {\n      removeByLocalId(id);\n    }\n\n    target.blur();\n  };\n\n  return {\n    handleRemoveClick,\n  };\n};\n","export enum ActionType {\n  Add = 'ADD',\n  Remove = 'REMOVE',\n  Initialize = 'INITIALIZE',\n  Destroy = 'DESTROY',\n  UpdateState = 'UPDATE_STATE',\n}\n\nexport enum LibraryState {\n  Initializing = 'Initializing',\n  Initialized = 'Initialized',\n  Destroyed = 'Destroyed',\n}\n","import { ActionType, LibraryState } from './constants';\nimport { AddEmailAction, RemoveEmailAction, UpdateStateAction } from './types';\n\n/**\n * Add new email\n * @param email\n */\nexport const addItemAction = (email: string): AddEmailAction => ({\n  payload: email,\n  type: ActionType.Add,\n});\n\n/**\n * Remove email\n * @param id\n */\nexport const removeItemAction = (id: string): RemoveEmailAction => ({\n  payload: id,\n  type: ActionType.Remove,\n});\n\n/**\n * Update Library's state\n * @param state\n */\nexport const updateStateAction = (state: LibraryState): UpdateStateAction => ({\n  payload: state,\n  type: ActionType.UpdateState,\n});\n","import { includes } from '../../../utils/ie11';\nimport { makeElementFromHTML } from '../../../utils/render';\nimport { isMultiple } from '../../../utils/typeGuards';\nimport { emailTemplate } from '../../components/email';\nimport { ChangeType } from '../../constants';\nimport { addItemAction } from '../../state/actionCreators';\nimport { EmailActionsProperties, EmailAddActions } from '../types';\n\n/**\n * Add Email Actions\n * @param EmailActionsProperties\n */\nexport const makeAddItemActions = ({\n  elements,\n  handleAction,\n  options,\n  state,\n}: EmailActionsProperties): EmailAddActions => {\n  /**\n   * Add unique email\n   * Returns true when email was added successfully and false when not.\n   * @param rawValue\n   * @private\n   */\n  const addSingle = (rawValue: string): boolean => {\n    const value = rawValue.trim();\n\n    if (value === '' || includes(state.emails, value)) {\n      return false;\n    }\n\n    // Update state\n    const newEntryId = handleAction(addItemAction(value));\n\n    // Update UI\n    if (typeof newEntryId === 'string' && elements.wrapper !== null) {\n      const entry = state.entryMap[newEntryId];\n\n      if (typeof entry !== 'undefined') {\n        const emailNode = makeElementFromHTML(emailTemplate(entry, newEntryId));\n        elements.wrapper.insertBefore(emailNode, elements.input);\n      }\n    }\n\n    // Notify listeners\n    options.onChange(value, ChangeType.Added, state.emails);\n\n    return true;\n  };\n\n  /**\n   * Adds multiple unique emails.\n   * Returns true when all emails were added successfully and false when not.\n   * @param value\n   * @private\n   */\n  const addMultiple = (value: string[]): boolean => {\n    const results = value.map((email: string): boolean => addSingle(email));\n\n    return !results.some((isSuccess: boolean): boolean => !isSuccess);\n  };\n\n  /**\n   * Add unique emails in any format.\n   * Returns true when added successfully and false when not.\n   *\n   * Accepts:\n   * - array of single emails\n   * - string with single email\n   * - string with multiple, comma separated emails\n   *\n   * Examples of @param value:\n   * [\"email@email.com\", \"email2@email.com\"]\n   * \"email@email.com, email2@email.com\"\n   * \"email@email.com\"\n   *\n   * @param value\n   * @public\n   */\n  const add = (value: string | string[]): boolean => {\n    // Array of emails\n    if (isMultiple(value)) {\n      return addMultiple(value);\n    }\n\n    // Split if value contains multiple, comma separated emails\n    const values = value.split(',');\n\n    return addMultiple(values);\n  };\n\n  return {\n    add,\n  };\n};\n","export enum ErrorCodes {\n  ERR_INVALID_INITIAL_VALUES = 'ERR_INVALID_INITIAL_VALUES',\n  ERR_INVALID_ON_CHANGE_CALLBACK = 'ERR_INVALID_ON_CHANGE_CALLBACK',\n  ERR_EMAIL_NOT_FOUND = 'ERR_EMAIL_NOT_FOUND',\n  ERR_INVALID_ACTION = 'ERR_INVALID_ACTION',\n  ERR_COULD_NOT_INITIALIZE = 'ERR_COULD_NOT_INITIALIZE',\n  ERR_INTERNAL = 'ERR_INTERNAL',\n}\n\n/**\n * Custom Error with code\n */\nexport class ErrorWithCode extends Error {\n  public code: string;\n\n  public constructor(message: string, code: ErrorCodes) {\n    super(message);\n    this.code = code;\n  }\n}\n","import { ErrorCodes, ErrorWithCode } from '../../../utils/error';\nimport { remove as removeNode } from '../../../utils/ie11';\nimport { ChangeType } from '../../constants';\nimport { removeItemAction } from '../../state/actionCreators';\nimport { EmailActionsProperties, EmailRemoveActions } from '../types';\n\n/**\n * Throw if not valid payload\n * @param id\n */\nconst validateEmail = (id?: string): void => {\n  if (typeof id === 'undefined') {\n    throw new ErrorWithCode('Invalid value.', ErrorCodes.ERR_EMAIL_NOT_FOUND);\n  }\n};\n\n/**\n * Remove Email Actions\n * @param ItemActionsProperties\n */\nexport const makeRemoveItemActions = ({\n  elements,\n  handleAction,\n  options,\n  state,\n}: EmailActionsProperties): EmailRemoveActions => {\n  /**\n   * Remove item\n   * @param localId\n   * @private\n   */\n  const remove = (localId: string): void => {\n    const { email } = state.entryMap[localId];\n\n    // Update state\n    handleAction(removeItemAction(localId));\n\n    // Update UI\n    const node = elements.wrapper?.querySelector(`div[data-id=\"${localId}\"`);\n    removeNode(node);\n\n    // Notify listeners\n    options.onChange(email, ChangeType.Removed, state.emails);\n  };\n\n  /**\n   * Remove item by it's internal id\n   * @param id\n   * @private\n   */\n  const removeByLocalId = (localId: string): void => {\n    if (typeof state.entryMap[localId] === 'undefined') {\n      throw new ErrorWithCode('Invalid id.', ErrorCodes.ERR_EMAIL_NOT_FOUND);\n    } else {\n      remove(localId);\n    }\n  };\n\n  /**\n   * Remove item by index\n   * @param index\n   * @public\n   */\n  const removeByIndex = (index: number): void => {\n    const name = state.emails[index];\n    const id = state.mapper[name];\n\n    validateEmail(id);\n    remove(id);\n  };\n\n  /**\n   * Remove item by name\n   * @param name\n   * @public\n   */\n  const removeByName = (name: string): void => {\n    const id = state.mapper[name];\n\n    validateEmail(id);\n    remove(id);\n  };\n\n  return {\n    removeByIndex,\n    removeByLocalId,\n    removeByName,\n  };\n};\n","import { EmailActions, EmailActionsProperties } from '../types';\nimport { makeAddItemActions } from './add';\nimport { makeRemoveItemActions } from './remove';\n\n/**\n * Actions to add and remove emails\n * @param properties\n */\nexport const makeItemActions = (\n  properties: EmailActionsProperties,\n): EmailActions => ({\n  ...makeAddItemActions(properties),\n  ...makeRemoveItemActions(properties),\n});\n","/**\n * Get object values\n * Object values is not available in IE11\n * @param object\n */\nexport const objectValues = <ObjectType>(instance: {\n  [key: string]: ObjectType;\n}): ObjectType[] =>\n  Object.keys(instance).map((key: string): ObjectType => instance[key]);\n\n/**\n * Get object entries\n * Object entries is not available in IE11\n * @param object\n */\nexport const objectEntries = <ObjectType>(instance: {\n  [key: string]: ObjectType;\n}): Array<[string, ObjectType]> =>\n  Object.keys(instance).map((key: string): [string, ObjectType] => [\n    key,\n    instance[key],\n  ]);\n","import { objectEntries } from '../../utils/object';\nimport { Entry, EntryMap } from '../state/types';\nimport { emailTemplate } from './email';\n\n/**\n * Emails Component Template\n * @param entryMap\n */\nexport const emailsTemplate = (entryMap: EntryMap): string =>\n  objectEntries<Entry>(entryMap)\n    .map(([localId, entry]: [string, Entry]): string =>\n      emailTemplate(entry, localId),\n    )\n    .join('');\n","import { ErrorCodes, ErrorWithCode } from '../../utils/error';\nimport { EmailActions } from '../actions/types';\nimport { CLASSES } from '../constants';\nimport { WindowWithClipboard } from '../types';\nimport { Elements, InputHandlers } from './types';\n\nexport const MIN_LENGTH = 21;\n\n/**\n * Input Component Template\n */\nexport const inputTemplate = (): string =>\n  `<input\n    aria-label=\"add more people\"\n    class=\"${CLASSES.INPUT}\"\n    max-length=\"255\"\n    placeholder=\"add more people...\"\n  />`;\n\n/**\n * Input Component Event Handlers\n * @param elements\n * @param handlers\n */\nexport const makeInputHandlers = (\n  elements: Elements,\n  handlers: EmailActions,\n): InputHandlers => {\n  const { add } = handlers;\n\n  /**\n   * Return input element\n   */\n  const getInput = (): HTMLInputElement => {\n    const { input } = elements;\n\n    if (input === null) {\n      throw new ErrorWithCode(\n        'Library is in wrong state.',\n        ErrorCodes.ERR_INTERNAL,\n      );\n    }\n\n    return input;\n  };\n\n  /**\n   * Add email on enter and comma\n   * @param event\n   */\n  const handleInputChange = (event: KeyboardEvent): void => {\n    const input = getInput();\n    const { key } = event;\n    const trimmed = input.value.trim();\n\n    if (trimmed === '') return;\n\n    const inputWidth = Math.max(input.value.length + 1, MIN_LENGTH);\n    input.style.minWidth = `${String(inputWidth)}ch`;\n\n    if (key === 'Enter') {\n      add(input.value);\n      input.value = '';\n    } else if (key === ',' && input.value.length > 1) {\n      add(input.value.slice(0, Math.max(0, input.value.length - 1)));\n      input.value = '';\n    }\n  };\n\n  /**\n   * Add email on paste\n   * @param event\n   */\n  const handleInputPaste = (event: ClipboardEvent): boolean => {\n    event.preventDefault();\n    event.stopImmediatePropagation();\n\n    const input = getInput();\n    const pastedText = (\n      event.clipboardData ??\n      ((window as unknown) as WindowWithClipboard).clipboardData\n    )\n      ?.getData('text')\n      .trim();\n\n    if (pastedText !== '' && pastedText !== undefined) {\n      add(pastedText);\n      input.value = '';\n    }\n\n    return false;\n  };\n\n  /**\n   * Add email on blur\n   */\n  const handleInputBlur = (): void => {\n    const input = getInput();\n    const trimmedValue = input.value.trim();\n\n    if (trimmedValue !== '') {\n      add(trimmedValue);\n      input.value = '';\n    }\n  };\n\n  return {\n    handleInputBlur,\n    handleInputChange,\n    handleInputPaste,\n  };\n};\n","import { CLASSES } from '../constants';\nimport { State } from '../state/types';\nimport { emailsTemplate } from './emails';\nimport { inputTemplate } from './input';\n\n/**\n * Root Component Template\n * @param state\n */\nexport const rootTemplate = (state: State): string => `\n  <div class=\"${CLASSES.WRAPPER}\">\n    ${emailsTemplate(state.entryMap)}\n    ${inputTemplate()}\n  </div>\n`;\n","import { ErrorCodes, ErrorWithCode } from '../../utils/error';\nimport { render } from '../../utils/render';\nimport { rootTemplate } from '../components/root';\nimport { CLASSES } from '../constants';\nimport { updateStateAction } from '../state/actionCreators';\nimport { LibraryState } from '../state/constants';\nimport { LibraryActionProperties, LibraryActions } from './types';\n\n/**\n * Public init / destroy actions\n * @param LibraryActionProperties\n */\nexport const makeLibraryActions = ({\n  elements,\n  handlers,\n  handleAction,\n  state,\n}: LibraryActionProperties): LibraryActions => {\n  // Keep the input always visible\n  const mutationHandler = (): void => {\n    if (elements.wrapper !== null) {\n      elements.wrapper.scrollTop = elements.wrapper.scrollHeight;\n    }\n  };\n\n  const observer = new MutationObserver(mutationHandler);\n\n  /**\n   * Initialize Library\n   * @public\n   */\n  const init = (): void => {\n    // Validate state\n    if (state.state === LibraryState.Initialized) {\n      throw new ErrorWithCode(\n        'Library already initialized.',\n        ErrorCodes.ERR_INVALID_ACTION,\n      );\n    }\n\n    // Render UI\n    render(rootTemplate(state), elements.container);\n    elements.container.classList.add(CLASSES.CONTAINER);\n\n    // Set elements\n    elements.input = elements.container.querySelector(`.${CLASSES.INPUT}`);\n    elements.wrapper = elements.container.querySelector(`.${CLASSES.WRAPPER}`);\n\n    // Validate\n    if (elements.input === null || elements.wrapper === null) {\n      throw new ErrorWithCode(\n        'Library could not be initialized properly.',\n        ErrorCodes.ERR_COULD_NOT_INITIALIZE,\n      );\n    }\n\n    // Attach listeners\n    elements.container.addEventListener('click', handlers.handleRemoveClick);\n    elements.input.addEventListener('keyup', handlers.handleInputChange);\n    elements.input.addEventListener('paste', handlers.handleInputPaste);\n    elements.input.addEventListener('blur', handlers.handleInputBlur);\n    observer.observe(elements.wrapper, {\n      childList: true,\n    });\n\n    // Update state\n    handleAction(updateStateAction(LibraryState.Initialized));\n  };\n\n  /**\n   * Kill Library\n   * @public\n   */\n  const destroy = (): void => {\n    // Validate state\n    if (state.state !== LibraryState.Initialized) {\n      throw new ErrorWithCode(\n        'Library is not initialized.',\n        ErrorCodes.ERR_INVALID_ACTION,\n      );\n    }\n\n    if (elements.input === null) {\n      throw new ErrorWithCode(\n        'Library is in wrong state.',\n        ErrorCodes.ERR_INTERNAL,\n      );\n    }\n\n    // Clean up\n    elements.container.removeEventListener('click', handlers.handleRemoveClick);\n    elements.input.removeEventListener('keyup', handlers.handleInputChange);\n    elements.input.removeEventListener('paste', handlers.handleInputPaste);\n    elements.input.removeEventListener('blur', handlers.handleInputBlur);\n    observer.disconnect();\n\n    // Clean UI\n    elements.container.textContent = '';\n    elements.container.classList.remove(CLASSES.CONTAINER);\n\n    // Clean elements\n    elements.wrapper = null;\n    elements.input = null;\n\n    // Update state\n    handleAction(updateStateAction(LibraryState.Destroyed));\n  };\n\n  return {\n    destroy,\n    init,\n  };\n};\n","import { ErrorCodes, ErrorWithCode } from '../../utils/error';\nimport { Options } from './types';\n\n/**\n * Validate options\n * @param options\n * @private\n */\nexport const validateOptions = (options: Partial<Options>): void => {\n  const { initialValue, onChange } = options;\n\n  if (initialValue !== undefined && !Array.isArray(initialValue)) {\n    throw new ErrorWithCode(\n      'Initial values must be an array.',\n      ErrorCodes.ERR_INVALID_INITIAL_VALUES,\n    );\n  }\n\n  if (onChange !== undefined && typeof onChange !== 'function') {\n    throw new ErrorWithCode(\n      'onChange callback is not a function.',\n      ErrorCodes.ERR_INVALID_ON_CHANGE_CALLBACK,\n    );\n  }\n};\n\n/**\n * Merge user options with default options\n * @param userOptions\n * @private\n */\nexport const makeOptions = (userOptions?: Partial<Options>): Options => ({\n  initialValue: [],\n  onChange: (): void => {},\n  ...userOptions,\n});\n","/**\n * Validate email\n * @param value\n */\nexport const isValidEmail = (value: string): boolean =>\n  /^[\\w%+.-]+@[\\d.a-z-]+\\.[a-z]{2,20}$/i.test(value);\n","import { isValidEmail } from '../../utils/isValidEmail';\nimport {\n  AddEmailAction,\n  RemoveEmailAction,\n  State,\n  UpdateStateAction,\n} from './types';\n\n/**\n * Remove email\n * @param action\n * @param state\n */\nexport const handleRemoveAction = (\n  action: RemoveEmailAction,\n  state: State,\n): void => {\n  const name = state.entryMap[action.payload].email;\n  const index = state.emails.indexOf(name);\n  delete state.entryMap[action.payload];\n  delete state.mapper[name];\n  state.entries.splice(index, 1);\n  state.emails.splice(index, 1);\n};\n\n/**\n * Add email\n * Returns local Id of new email\n * @param action\n * @param state\n * @param newId\n */\nexport const handleAddAction = (\n  action: AddEmailAction,\n  state: State,\n  newId: string,\n): void => {\n  const entry = {\n    email: action.payload,\n    isValid: isValidEmail(action.payload),\n  };\n  state.emails.push(action.payload);\n  state.mapper[action.payload] = newId;\n  state.entryMap[newId] = entry;\n  state.entries.push(entry);\n};\n\n/**\n * Update Library state\n * @param action\n * @param state\n */\nexport const handleUpdateAction = (\n  action: UpdateStateAction,\n  state: State,\n): void => {\n  state.state = action.payload;\n};\n","import { isValidEmail } from '../../utils/isValidEmail';\nimport { objectValues } from '../../utils/object';\nimport {\n  handleAddAction,\n  handleRemoveAction,\n  handleUpdateAction,\n} from './actions';\nimport { ActionType, LibraryState } from './constants';\nimport {\n  EmailMapper,\n  Entry,\n  EntryMap,\n  State,\n  StateAction,\n  StateManager,\n} from './types';\n\n/**\n * Library's State Manipulation\n */\nexport const stateManager = (): StateManager => {\n  const id = {\n    current: 1,\n  };\n\n  /**\n   * Return new state\n   * @param initialValue\n   */\n  const makeState = (initialValue: string[]): State => {\n    const mapper: EmailMapper = {};\n\n    const entryMap = initialValue.reduce(\n      (map: EntryMap, email: string): EntryMap => {\n        const newId = String(id.current);\n        map[newId] = {\n          email,\n          isValid: isValidEmail(email),\n        };\n        mapper[email] = newId;\n        id.current++;\n\n        return map;\n      },\n      {},\n    );\n\n    return {\n      emails: initialValue,\n      entries: objectValues<Entry>(entryMap),\n      entryMap,\n      mapper,\n      state: LibraryState.Initializing,\n    };\n  };\n\n  /**\n   * Process action\n   * @param action\n   * @param state\n   */\n  const handleAction = (\n    action: StateAction,\n    state: State,\n  ): string | undefined => {\n    switch (action.type) {\n      case ActionType.Add: {\n        const newId = String(id.current);\n        handleAddAction(action, state, newId);\n        id.current++;\n\n        return newId;\n      }\n\n      case ActionType.Remove: {\n        handleRemoveAction(action, state);\n\n        return undefined;\n      }\n\n      case ActionType.UpdateState: {\n        handleUpdateAction(action, state);\n\n        return undefined;\n      }\n\n      default: {\n        return undefined;\n      }\n    }\n  };\n\n  return {\n    handleAction,\n    makeState,\n  };\n};\n","import './styles.scss';\n\nimport { makeItemActions } from './lib/actions/emailActions';\nimport { makeLibraryActions } from './lib/actions/libraryActions';\nimport { makeEmailHandlers } from './lib/components/email';\nimport { makeInputHandlers } from './lib/components/input';\nimport { Elements, Handlers } from './lib/components/types';\nimport { makeOptions, validateOptions } from './lib/options';\nimport { Options } from './lib/options/types';\nimport { stateManager } from './lib/state/stateManager';\nimport { StateAction } from './lib/state/types';\nimport { Library } from './lib/types';\n\n/**\n * Emails Input Library\n * @param element\n * @param userOptions\n */\nconst EmailsInput = (\n  element: HTMLElement,\n  userOptions?: Partial<Options>,\n): Library => {\n  // Merge and validate options\n  const options: Options = makeOptions(userOptions);\n  validateOptions(options);\n\n  // Init State\n  const { makeState, handleAction } = stateManager();\n  const state = makeState(options.initialValue);\n  const dispatch = (action: StateAction): string | undefined =>\n    handleAction(action, state);\n\n  // DOM Nodes\n  const elements: Elements = {\n    container: element,\n    input: null,\n    wrapper: null,\n  };\n\n  // Email Actions\n  const itemActions = makeItemActions({\n    elements,\n    handleAction: dispatch,\n    options,\n    state,\n  });\n\n  // Event Handlers\n  const handlers: Handlers = {\n    ...makeInputHandlers(elements, itemActions),\n    ...makeEmailHandlers(itemActions),\n  };\n\n  // Library Actions\n  const libraryActions = makeLibraryActions({\n    elements,\n    handleAction: dispatch,\n    handlers,\n    state,\n  });\n\n  // Initialize library\n  libraryActions.init();\n\n  /**\n   * Library's Public API\n   *\n   * State:\n   * - emails\n   * - entries\n   *\n   * Library Methods:\n   * - init\n   * - destroy\n   *\n   * Email methods:\n   * - add\n   * - removeByIndex\n   * - removeByName\n   *\n   */\n  return {\n    add: itemActions.add,\n    destroy: libraryActions.destroy,\n    emails: state.emails,\n    entries: state.entries,\n    init: libraryActions.init,\n    removeByIndex: itemActions.removeByIndex,\n    removeByName: itemActions.removeByName,\n  };\n};\n\nexport default EmailsInput;\n"],"names":["remove","removeNode"],"mappings":"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"}