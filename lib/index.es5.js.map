{"version":3,"file":"index.es5.js","sources":["../src/utils/ie11.ts","../src/utils/render.ts","../src/utils/typeGuards.ts","../src/utils/sanitize.ts","../src/lib/constants.ts","../src/lib/components/email.ts","../src/lib/state/constants.ts","../src/lib/state/actionCreators.ts","../src/lib/actions/emailActions/add.ts","../src/utils/error.ts","../src/lib/actions/emailActions/remove.ts","../src/lib/actions/emailActions/index.ts","../src/utils/object.ts","../src/lib/components/emails.ts","../src/lib/components/input.ts","../src/lib/components/root.ts","../src/lib/actions/libraryActions.ts","../src/lib/options/index.ts","../src/utils/isValidEmail.ts","../src/lib/state/actions.ts","../src/lib/state/stateManager.ts","../src/index.ts"],"sourcesContent":["export const remove = (node?: Element | null): void => {\n  if (node === undefined || node === null) {\n    return;\n  }\n\n  if ('remove' in Element.prototype) {\n    node.remove();\n  } else if (node.parentNode !== null) {\n    // eslint-disable-next-line unicorn/prefer-node-remove\n    node.parentNode.removeChild(node);\n  }\n};\n\nexport const includes = (array: string[], item: string): boolean => {\n  // eslint-disable-next-line max-len\n  // eslint-disable-next-line @typescript-eslint/prefer-includes, unicorn/prefer-includes,\n  return array.indexOf(item) !== -1;\n};\n","/**\n * Render Component\n * @param template\n * @param element\n */\nexport const render = (template: string, element: Element): void => {\n  element.innerHTML += template.trim();\n};\n\n/**\n * Make DOM Node from template\n * @param template\n */\nexport const makeElementFromHTML = (template: string): ChildNode => {\n  const div = document.createElement('div');\n  render(template, div);\n\n  return div.firstChild as ChildNode;\n};\n","/**\n * Verify if clicked element is a button\n * @param node\n */\nexport const isClickedButton = (\n  node: EventTarget | null,\n): node is HTMLButtonElement => {\n  return Boolean((node as HTMLButtonElement).type === 'button');\n};\n\n/**\n * Verify if value is an array of emails\n * @param value\n */\nexport const isMultiple = (value: string | string[]): value is string[] => {\n  return Array.isArray(value);\n};\n","/**\n * Sanitizes rendered HTML\n * @param value\n */\nexport const sanitize = (value: string): string => {\n  return value\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/\"/g, '&quot;');\n};\n","export enum ChangeType {\n  Added = 'Added',\n  Removed = 'Removed',\n}\n\nexport const CLASSES = {\n  CONTAINER: 'EmailsInputWrapper',\n  EMAIL: 'EmailsInput-email',\n  INPUT: 'EmailsInput-input',\n  WRAPPER: 'EmailsInput',\n};\n","import { sanitize } from '../../utils/sanitize';\nimport { isClickedButton } from '../../utils/typeGuards';\nimport { EmailActions } from '../actions/types';\nimport { CLASSES } from '../constants';\nimport { Entry } from '../state/types';\nimport { EmailHandlers } from './types';\n\nexport const EMAIL_CLASSES = {\n  removeButton: 'Email-remove',\n  root: 'Email',\n  text: 'Email-text',\n};\n\nconst { removeButton, root, text } = EMAIL_CLASSES;\n\n/**\n * Email Component Template\n * @param value\n * @param id\n */\nexport const emailTemplate = (value: Entry, id: string): string => `\n<div class=\"${CLASSES.EMAIL} ${root} Email--${\n  value.isValid ? 'valid' : 'invalid'\n}\" data-id=\"${id}\">\n  <span class=\"${text}\">\n    ${sanitize(value.email)}\n  </span>\n  <button aria-label=\"remove email\" class=\"${removeButton}\" data-id=\"${id}\" type=\"button\">\n    &times;\n  </button>\n</div>`;\n\n/**\n * Email Component Event Handlers\n * @param handlers\n */\nexport const makeEmailHandlers = (handlers: EmailActions): EmailHandlers => {\n  const { removeByLocalId } = handlers;\n\n  const handleRemoveClick = (event: MouseEvent): void => {\n    const { target } = event;\n\n    if (!isClickedButton(target)) {\n      return;\n    }\n\n    const { id } = target.dataset;\n\n    if (typeof id !== 'undefined') {\n      removeByLocalId(id);\n    }\n\n    target.blur();\n  };\n\n  return {\n    handleRemoveClick,\n  };\n};\n","export enum ActionType {\n  Add = 'ADD',\n  Remove = 'REMOVE',\n  Initialize = 'INITIALIZE',\n  Destroy = 'DESTROY',\n  UpdateState = 'UPDATE_STATE',\n}\n\nexport enum LibraryState {\n  Initializing = 'Initializing',\n  Initialized = 'Initialized',\n  Destroyed = 'Destroyed',\n}\n","import { ActionType, LibraryState } from './constants';\nimport { AddEmailAction, RemoveEmailAction, UpdateStateAction } from './types';\n\n/**\n * Add new email\n * @param email\n */\nexport const addItemAction = (email: string): AddEmailAction => ({\n  payload: email,\n  type: ActionType.Add,\n});\n\n/**\n * Remove email\n * @param id\n */\nexport const removeItemAction = (id: string): RemoveEmailAction => ({\n  payload: id,\n  type: ActionType.Remove,\n});\n\n/**\n * Update Library's state\n * @param state\n */\nexport const updateStateAction = (state: LibraryState): UpdateStateAction => ({\n  payload: state,\n  type: ActionType.UpdateState,\n});\n","import { includes } from '../../../utils/ie11';\nimport { makeElementFromHTML } from '../../../utils/render';\nimport { isMultiple } from '../../../utils/typeGuards';\nimport { emailTemplate } from '../../components/email';\nimport { ChangeType } from '../../constants';\nimport { addItemAction } from '../../state/actionCreators';\nimport { EmailActionsProperties, EmailAddActions } from '../types';\n\n/**\n * Add Email Actions\n * @param EmailActionsProperties\n */\nexport const makeAddItemActions = ({\n  elements,\n  handleAction,\n  options,\n  state,\n}: EmailActionsProperties): EmailAddActions => {\n  /**\n   * Add unique email\n   * Returns true when email was added successfully and false when not.\n   * @param rawValue\n   * @private\n   */\n  const addSingle = (rawValue: string): boolean => {\n    const value = rawValue.trim();\n\n    if (value === '' || includes(state.emails, value)) {\n      return false;\n    }\n\n    // Update state\n    const newEntryId = handleAction(addItemAction(value));\n\n    // Update UI\n    if (typeof newEntryId === 'string' && elements.wrapper !== null) {\n      const entry = state.entryMap[newEntryId];\n\n      if (typeof entry !== 'undefined') {\n        const emailNode = makeElementFromHTML(emailTemplate(entry, newEntryId));\n        elements.wrapper.insertBefore(emailNode, elements.input);\n      }\n    }\n\n    // Notify listeners\n    options.onChange(value, ChangeType.Added, state.emails);\n\n    return true;\n  };\n\n  /**\n   * Adds multiple unique emails.\n   * Returns true when all emails were added successfully and false when not.\n   * @param value\n   * @private\n   */\n  const addMultiple = (value: string[]): boolean => {\n    const results = value.map((email: string): boolean => addSingle(email));\n\n    return !results.some((isSuccess: boolean): boolean => !isSuccess);\n  };\n\n  /**\n   * Add unique emails in any format.\n   * Returns true when added successfully and false when not.\n   *\n   * Accepts:\n   * - array of single emails\n   * - string with single email\n   * - string with multiple, comma separated emails\n   *\n   * Examples of @param value:\n   * [\"email@email.com\", \"email2@email.com\"]\n   * \"email@email.com, email2@email.com\"\n   * \"email@email.com\"\n   *\n   * @param value\n   * @public\n   */\n  const add = (value: string | string[]): boolean => {\n    // Array of emails\n    if (isMultiple(value)) {\n      return addMultiple(value);\n    }\n\n    // Split if value contains multiple, comma separated emails\n    const values = value.split(',');\n\n    return addMultiple(values);\n  };\n\n  return {\n    add,\n  };\n};\n","export enum ErrorCodes {\n  ERR_INVALID_INITIAL_VALUES = 'ERR_INVALID_INITIAL_VALUES',\n  ERR_INVALID_ON_CHANGE_CALLBACK = 'ERR_INVALID_ON_CHANGE_CALLBACK',\n  ERR_EMAIL_NOT_FOUND = 'ERR_EMAIL_NOT_FOUND',\n  ERR_INVALID_ACTION = 'ERR_INVALID_ACTION',\n  ERR_COULD_NOT_INITIALIZE = 'ERR_COULD_NOT_INITIALIZE',\n  ERR_INTERNAL = 'ERR_INTERNAL',\n}\n\n/**\n * Custom Error with code\n */\nexport class ErrorWithCode extends Error {\n  public code: string;\n\n  public constructor(message: string, code: ErrorCodes) {\n    super(message);\n    this.code = code;\n  }\n}\n","import { ErrorCodes, ErrorWithCode } from '../../../utils/error';\nimport { remove as removeNode } from '../../../utils/ie11';\nimport { ChangeType } from '../../constants';\nimport { removeItemAction } from '../../state/actionCreators';\nimport { EmailActionsProperties, EmailRemoveActions } from '../types';\n\n/**\n * Throw if not valid payload\n * @param id\n */\nconst validateEmail = (id?: string): void => {\n  if (typeof id === 'undefined') {\n    throw new ErrorWithCode('Invalid value.', ErrorCodes.ERR_EMAIL_NOT_FOUND);\n  }\n};\n\n/**\n * Remove Email Actions\n * @param ItemActionsProperties\n */\nexport const makeRemoveItemActions = ({\n  elements,\n  handleAction,\n  options,\n  state,\n}: EmailActionsProperties): EmailRemoveActions => {\n  /**\n   * Remove item\n   * @param localId\n   * @private\n   */\n  const remove = (localId: string): void => {\n    const { email } = state.entryMap[localId];\n\n    // Update state\n    handleAction(removeItemAction(localId));\n\n    // Update UI\n    const node = elements.wrapper?.querySelector(`div[data-id=\"${localId}\"`);\n    removeNode(node);\n\n    // Notify listeners\n    options.onChange(email, ChangeType.Removed, state.emails);\n  };\n\n  /**\n   * Remove item by it's internal id\n   * @param id\n   * @private\n   */\n  const removeByLocalId = (localId: string): void => {\n    if (typeof state.entryMap[localId] === 'undefined') {\n      throw new ErrorWithCode('Invalid id.', ErrorCodes.ERR_EMAIL_NOT_FOUND);\n    } else {\n      remove(localId);\n    }\n  };\n\n  /**\n   * Remove item by index\n   * @param index\n   * @public\n   */\n  const removeByIndex = (index: number): void => {\n    const name = state.emails[index];\n    const id = state.mapper[name];\n\n    validateEmail(id);\n    remove(id);\n  };\n\n  /**\n   * Remove item by name\n   * @param name\n   * @public\n   */\n  const removeByName = (name: string): void => {\n    const id = state.mapper[name];\n\n    validateEmail(id);\n    remove(id);\n  };\n\n  return {\n    removeByIndex,\n    removeByLocalId,\n    removeByName,\n  };\n};\n","import { EmailActions, EmailActionsProperties } from '../types';\nimport { makeAddItemActions } from './add';\nimport { makeRemoveItemActions } from './remove';\n\n/**\n * Actions to add and remove emails\n * @param properties\n */\nexport const makeItemActions = (\n  properties: EmailActionsProperties,\n): EmailActions => ({\n  ...makeAddItemActions(properties),\n  ...makeRemoveItemActions(properties),\n});\n","/**\n * Get object values\n * Object values is not available in IE11\n * @param object\n */\nexport const objectValues = <ObjectType>(instance: {\n  [key: string]: ObjectType;\n}): ObjectType[] =>\n  Object.keys(instance).map((key: string): ObjectType => instance[key]);\n\n/**\n * Get object entries\n * Object entries is not available in IE11\n * @param object\n */\nexport const objectEntries = <ObjectType>(instance: {\n  [key: string]: ObjectType;\n}): Array<[string, ObjectType]> =>\n  Object.keys(instance).map((key: string): [string, ObjectType] => [\n    key,\n    instance[key],\n  ]);\n","import { objectEntries } from '../../utils/object';\nimport { Entry, EntryMap } from '../state/types';\nimport { emailTemplate } from './email';\n\n/**\n * Emails Component Template\n * @param entryMap\n */\nexport const emailsTemplate = (entryMap: EntryMap): string =>\n  objectEntries<Entry>(entryMap)\n    .map(([localId, entry]: [string, Entry]): string =>\n      emailTemplate(entry, localId),\n    )\n    .join('');\n","import { ErrorCodes, ErrorWithCode } from '../../utils/error';\nimport { EmailActions } from '../actions/types';\nimport { CLASSES } from '../constants';\nimport { WindowWithClipboard } from '../types';\nimport { Elements, InputHandlers } from './types';\n\nexport const MIN_LENGTH = 21;\n\n/**\n * Input Component Template\n */\nexport const inputTemplate = (): string =>\n  `<input\n    aria-label=\"add more people\"\n    class=\"${CLASSES.INPUT}\"\n    max-length=\"255\"\n    placeholder=\"add more people...\"\n  />`;\n\n/**\n * Input Component Event Handlers\n * @param elements\n * @param handlers\n */\nexport const makeInputHandlers = (\n  elements: Elements,\n  handlers: EmailActions,\n): InputHandlers => {\n  const { add } = handlers;\n\n  /**\n   * Return input element\n   */\n  const getInput = (): HTMLInputElement => {\n    const { input } = elements;\n\n    if (input === null) {\n      throw new ErrorWithCode(\n        'Library is in wrong state.',\n        ErrorCodes.ERR_INTERNAL,\n      );\n    }\n\n    return input;\n  };\n\n  /**\n   * Add email on enter and comma\n   * @param event\n   */\n  const handleInputChange = (event: KeyboardEvent): void => {\n    const input = getInput();\n    const { key } = event;\n    const trimmed = input.value.trim();\n\n    if (trimmed === '') return;\n\n    const inputWidth = Math.max(input.value.length + 1, MIN_LENGTH);\n    input.style.minWidth = `${String(inputWidth)}ch`;\n\n    if (key === 'Enter') {\n      add(input.value);\n      input.value = '';\n    } else if (key === ',' && input.value.length > 1) {\n      add(input.value.slice(0, Math.max(0, input.value.length - 1)));\n      input.value = '';\n    }\n  };\n\n  /**\n   * Add email on paste\n   * @param event\n   */\n  const handleInputPaste = (event: ClipboardEvent): boolean => {\n    event.preventDefault();\n    event.stopImmediatePropagation();\n\n    const input = getInput();\n    const pastedText = (\n      event.clipboardData ??\n      ((window as unknown) as WindowWithClipboard).clipboardData\n    )\n      ?.getData('text')\n      .trim();\n\n    if (pastedText !== '' && pastedText !== undefined) {\n      add(pastedText);\n      input.value = '';\n    }\n\n    return false;\n  };\n\n  /**\n   * Add email on blur\n   */\n  const handleInputBlur = (): void => {\n    const input = getInput();\n    const trimmedValue = input.value.trim();\n\n    if (trimmedValue !== '') {\n      add(trimmedValue);\n      input.value = '';\n    }\n  };\n\n  return {\n    handleInputBlur,\n    handleInputChange,\n    handleInputPaste,\n  };\n};\n","import { CLASSES } from '../constants';\nimport { State } from '../state/types';\nimport { emailsTemplate } from './emails';\nimport { inputTemplate } from './input';\n\n/**\n * Root Component Template\n * @param state\n */\nexport const rootTemplate = (state: State): string => `\n  <div class=\"${CLASSES.WRAPPER}\">\n    ${emailsTemplate(state.entryMap)}\n    ${inputTemplate()}\n  </div>\n`;\n","import { ErrorCodes, ErrorWithCode } from '../../utils/error';\nimport { render } from '../../utils/render';\nimport { rootTemplate } from '../components/root';\nimport { CLASSES } from '../constants';\nimport { updateStateAction } from '../state/actionCreators';\nimport { LibraryState } from '../state/constants';\nimport { LibraryActionProperties, LibraryActions } from './types';\n\n/**\n * Public init / destroy actions\n * @param LibraryActionProperties\n */\nexport const makeLibraryActions = ({\n  elements,\n  handlers,\n  handleAction,\n  state,\n}: LibraryActionProperties): LibraryActions => {\n  // Keep the input always visible\n  const mutationHandler = (): void => {\n    if (elements.wrapper !== null) {\n      elements.wrapper.scrollTop = elements.wrapper.scrollHeight;\n    }\n  };\n\n  const observer = new MutationObserver(mutationHandler);\n\n  /**\n   * Initialize Library\n   * @public\n   */\n  const init = (): void => {\n    // Validate state\n    if (state.state === LibraryState.Initialized) {\n      throw new ErrorWithCode(\n        'Library already initialized.',\n        ErrorCodes.ERR_INVALID_ACTION,\n      );\n    }\n\n    // Render UI\n    render(rootTemplate(state), elements.container);\n    elements.container.classList.add(CLASSES.CONTAINER);\n\n    // Set elements\n    elements.input = elements.container.querySelector(`.${CLASSES.INPUT}`);\n    elements.wrapper = elements.container.querySelector(`.${CLASSES.WRAPPER}`);\n\n    // Validate\n    if (elements.input === null || elements.wrapper === null) {\n      throw new ErrorWithCode(\n        'Library could not be initialized properly.',\n        ErrorCodes.ERR_COULD_NOT_INITIALIZE,\n      );\n    }\n\n    // Attach listeners\n    elements.container.addEventListener('click', handlers.handleRemoveClick);\n    elements.input.addEventListener('keyup', handlers.handleInputChange);\n    elements.input.addEventListener('paste', handlers.handleInputPaste);\n    elements.input.addEventListener('blur', handlers.handleInputBlur);\n    observer.observe(elements.wrapper, {\n      childList: true,\n    });\n\n    // Update state\n    handleAction(updateStateAction(LibraryState.Initialized));\n  };\n\n  /**\n   * Kill Library\n   * @public\n   */\n  const destroy = (): void => {\n    // Validate state\n    if (state.state !== LibraryState.Initialized) {\n      throw new ErrorWithCode(\n        'Library is not initialized.',\n        ErrorCodes.ERR_INVALID_ACTION,\n      );\n    }\n\n    if (elements.input === null) {\n      throw new ErrorWithCode(\n        'Library is in wrong state.',\n        ErrorCodes.ERR_INTERNAL,\n      );\n    }\n\n    // Clean up\n    elements.container.removeEventListener('click', handlers.handleRemoveClick);\n    elements.input.removeEventListener('keyup', handlers.handleInputChange);\n    elements.input.removeEventListener('paste', handlers.handleInputPaste);\n    elements.input.removeEventListener('blur', handlers.handleInputBlur);\n    observer.disconnect();\n\n    // Clean UI\n    elements.container.textContent = '';\n    elements.container.classList.remove(CLASSES.CONTAINER);\n\n    // Clean elements\n    elements.wrapper = null;\n    elements.input = null;\n\n    // Update state\n    handleAction(updateStateAction(LibraryState.Destroyed));\n  };\n\n  return {\n    destroy,\n    init,\n  };\n};\n","import { ErrorCodes, ErrorWithCode } from '../../utils/error';\nimport { Options } from './types';\n\n/**\n * Validate options\n * @param options\n * @private\n */\nexport const validateOptions = (options: Partial<Options>): void => {\n  const { initialValue, onChange } = options;\n\n  if (initialValue !== undefined && !Array.isArray(initialValue)) {\n    throw new ErrorWithCode(\n      'Initial values must be an array.',\n      ErrorCodes.ERR_INVALID_INITIAL_VALUES,\n    );\n  }\n\n  if (onChange !== undefined && typeof onChange !== 'function') {\n    throw new ErrorWithCode(\n      'onChange callback is not a function.',\n      ErrorCodes.ERR_INVALID_ON_CHANGE_CALLBACK,\n    );\n  }\n};\n\n/**\n * Merge user options with default options\n * @param userOptions\n * @private\n */\nexport const makeOptions = (userOptions?: Partial<Options>): Options => ({\n  initialValue: [],\n  onChange: (): void => {},\n  ...userOptions,\n});\n","/**\n * Validate email\n * @param value\n */\nexport const isValidEmail = (value: string): boolean =>\n  /^[\\w%+.-]+@[\\d.a-z-]+\\.[a-z]{2,20}$/i.test(value);\n","import { isValidEmail } from '../../utils/isValidEmail';\nimport {\n  AddEmailAction,\n  RemoveEmailAction,\n  State,\n  UpdateStateAction,\n} from './types';\n\n/**\n * Remove email\n * @param action\n * @param state\n */\nexport const handleRemoveAction = (\n  action: RemoveEmailAction,\n  state: State,\n): void => {\n  const name = state.entryMap[action.payload].email;\n  const index = state.emails.indexOf(name);\n  delete state.entryMap[action.payload];\n  delete state.mapper[name];\n  state.entries.splice(index, 1);\n  state.emails.splice(index, 1);\n};\n\n/**\n * Add email\n * Returns local Id of new email\n * @param action\n * @param state\n * @param newId\n */\nexport const handleAddAction = (\n  action: AddEmailAction,\n  state: State,\n  newId: string,\n): void => {\n  const entry = {\n    email: action.payload,\n    isValid: isValidEmail(action.payload),\n  };\n  state.emails.push(action.payload);\n  state.mapper[action.payload] = newId;\n  state.entryMap[newId] = entry;\n  state.entries.push(entry);\n};\n\n/**\n * Update Library state\n * @param action\n * @param state\n */\nexport const handleUpdateAction = (\n  action: UpdateStateAction,\n  state: State,\n): void => {\n  state.state = action.payload;\n};\n","import { isValidEmail } from '../../utils/isValidEmail';\nimport { objectValues } from '../../utils/object';\nimport {\n  handleAddAction,\n  handleRemoveAction,\n  handleUpdateAction,\n} from './actions';\nimport { ActionType, LibraryState } from './constants';\nimport {\n  EmailMapper,\n  Entry,\n  EntryMap,\n  State,\n  StateAction,\n  StateManager,\n} from './types';\n\n/**\n * Library's State Manipulation\n */\nexport const stateManager = (): StateManager => {\n  const id = {\n    current: 1,\n  };\n\n  /**\n   * Return new state\n   * @param initialValue\n   */\n  const makeState = (initialValue: string[]): State => {\n    const mapper: EmailMapper = {};\n\n    const entryMap = initialValue.reduce(\n      (map: EntryMap, email: string): EntryMap => {\n        const newId = String(id.current);\n        map[newId] = {\n          email,\n          isValid: isValidEmail(email),\n        };\n        mapper[email] = newId;\n        id.current++;\n\n        return map;\n      },\n      {},\n    );\n\n    return {\n      emails: initialValue,\n      entries: objectValues<Entry>(entryMap),\n      entryMap,\n      mapper,\n      state: LibraryState.Initializing,\n    };\n  };\n\n  /**\n   * Process action\n   * @param action\n   * @param state\n   */\n  const handleAction = (\n    action: StateAction,\n    state: State,\n  ): string | undefined => {\n    switch (action.type) {\n      case ActionType.Add: {\n        const newId = String(id.current);\n        handleAddAction(action, state, newId);\n        id.current++;\n\n        return newId;\n      }\n\n      case ActionType.Remove: {\n        handleRemoveAction(action, state);\n\n        return undefined;\n      }\n\n      case ActionType.UpdateState: {\n        handleUpdateAction(action, state);\n\n        return undefined;\n      }\n\n      default: {\n        return undefined;\n      }\n    }\n  };\n\n  return {\n    handleAction,\n    makeState,\n  };\n};\n","import './styles.scss';\n\nimport { makeItemActions } from './lib/actions/emailActions';\nimport { makeLibraryActions } from './lib/actions/libraryActions';\nimport { makeEmailHandlers } from './lib/components/email';\nimport { makeInputHandlers } from './lib/components/input';\nimport { Elements, Handlers } from './lib/components/types';\nimport { makeOptions, validateOptions } from './lib/options';\nimport { Options } from './lib/options/types';\nimport { stateManager } from './lib/state/stateManager';\nimport { StateAction } from './lib/state/types';\nimport { Library } from './lib/types';\n\n/**\n * Emails Input Library\n * @param element\n * @param userOptions\n */\nconst EmailsInput = (\n  element: HTMLElement,\n  userOptions?: Partial<Options>,\n): Library => {\n  // Merge and validate options\n  const options: Options = makeOptions(userOptions);\n  validateOptions(options);\n\n  // Init State\n  const { makeState, handleAction } = stateManager();\n  const state = makeState(options.initialValue);\n  const dispatch = (action: StateAction): string | undefined =>\n    handleAction(action, state);\n\n  // DOM Nodes\n  const elements: Elements = {\n    container: element,\n    input: null,\n    wrapper: null,\n  };\n\n  // Email Actions\n  const itemActions = makeItemActions({\n    elements,\n    handleAction: dispatch,\n    options,\n    state,\n  });\n\n  // Event Handlers\n  const handlers: Handlers = {\n    ...makeInputHandlers(elements, itemActions),\n    ...makeEmailHandlers(itemActions),\n  };\n\n  // Library Actions\n  const libraryActions = makeLibraryActions({\n    elements,\n    handleAction: dispatch,\n    handlers,\n    state,\n  });\n\n  // Initialize library\n  libraryActions.init();\n\n  /**\n   * Library's Public API\n   *\n   * State:\n   * - emails\n   * - entries\n   *\n   * Library Methods:\n   * - init\n   * - destroy\n   *\n   * Email methods:\n   * - add\n   * - removeByIndex\n   * - removeByName\n   *\n   */\n  return {\n    add: itemActions.add,\n    destroy: libraryActions.destroy,\n    emails: state.emails,\n    entries: state.entries,\n    init: libraryActions.init,\n    removeByIndex: itemActions.removeByIndex,\n    removeByName: itemActions.removeByName,\n  };\n};\n\nexport default EmailsInput;\n"],"names":["remove","removeNode"],"mappings":"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"}